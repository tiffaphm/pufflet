{"version":3,"file":"DateRangeFieldRoot.cjs","sources":["../../src/DateRangeField/DateRangeFieldRoot.vue"],"sourcesContent":["<script lang=\"ts\">\nimport type { DateValue } from '@internationalized/date'\n\nimport type { Ref } from 'vue'\nimport type { PrimitiveProps } from '@/Primitive'\nimport { type Formatter, createContext, useDateFormatter, useDirection, useKbd, useLocale } from '@/shared'\nimport {\n  type DateRange,\n  type Granularity,\n  type HourCycle,\n  type SegmentPart,\n  type SegmentValueObj,\n  createContent,\n  getDefaultDate,\n  getSegmentElements,\n  initializeSegmentValues,\n  isSegmentNavigationKey,\n  syncSegmentValues,\n} from '@/shared/date'\nimport {\n  type Matcher,\n  areAllDaysBetweenValid,\n  hasTime,\n  isBefore,\n  isBeforeOrSame,\n} from '@/date'\nimport type { Direction, FormFieldProps } from '@/shared/types'\n\nexport type DateRangeType = 'start' | 'end'\n\ntype DateRangeFieldRootContext = {\n  locale: Ref<string>\n  startValue: Ref<DateValue | undefined>\n  endValue: Ref<DateValue | undefined>\n  placeholder: Ref<DateValue>\n  isDateUnavailable?: Matcher\n  isInvalid: Ref<boolean>\n  disabled: Ref<boolean>\n  readonly: Ref<boolean>\n  formatter: Formatter\n  hourCycle: HourCycle\n  segmentValues: Record<DateRangeType, Ref<SegmentValueObj>>\n  segmentContents: Ref<{ start: { part: SegmentPart, value: string }[], end: { part: SegmentPart, value: string }[] }>\n  elements: Ref<Set<HTMLElement>>\n  focusNext: () => void\n  setFocusedElement: (el: HTMLElement) => void\n}\n\nexport interface DateRangeFieldRootProps extends PrimitiveProps, FormFieldProps {\n  /** The default value for the calendar */\n  defaultValue?: DateRange\n  /** The default placeholder date */\n  defaultPlaceholder?: DateValue\n  /** The placeholder date, which is used to determine what month to display when no date is selected. This updates as the user navigates the calendar and can be used to programmatically control the calendar view */\n  placeholder?: DateValue\n  /** The controlled checked state of the calendar. Can be bound as `v-model`. */\n  modelValue?: DateRange | null\n  /** The hour cycle used for formatting times. Defaults to the local preference */\n  hourCycle?: HourCycle\n  /** The granularity to use for formatting times. Defaults to day if a CalendarDate is provided, otherwise defaults to minute. The field will render segments for each part of the date up to and including the specified granularity */\n  granularity?: Granularity\n  /** Whether or not to hide the time zone segment of the field */\n  hideTimeZone?: boolean\n  /** The maximum date that can be selected */\n  maxValue?: DateValue\n  /** The minimum date that can be selected */\n  minValue?: DateValue\n  /** The locale to use for formatting dates */\n  locale?: string\n  /** Whether or not the date field is disabled */\n  disabled?: boolean\n  /** Whether or not the date field is readonly */\n  readonly?: boolean\n  /** A function that returns whether or not a date is unavailable */\n  isDateUnavailable?: Matcher\n  /** Id of the element */\n  id?: string\n  /** The reading direction of the date field when applicable. <br> If omitted, inherits globally from `ConfigProvider` or assumes LTR (left-to-right) reading mode. */\n  dir?: Direction\n}\n\nexport type DateRangeFieldRootEmits = {\n  /** Event handler called whenever the model value changes */\n  'update:modelValue': [DateRange]\n  /** Event handler called whenever the placeholder value changes */\n  'update:placeholder': [date: DateValue]\n}\n\nexport const [injectDateRangeFieldRootContext, provideDateRangeFieldRootContext]\n  = createContext<DateRangeFieldRootContext>('DateRangeFieldRoot')\n</script>\n\n<script setup lang=\"ts\">\nimport { computed, nextTick, onMounted, ref, toRefs, watch } from 'vue'\nimport { Primitive, usePrimitiveElement } from '@/Primitive'\nimport { useVModel } from '@vueuse/core'\nimport { VisuallyHidden } from '@/VisuallyHidden'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = withDefaults(defineProps<DateRangeFieldRootProps>(), {\n  defaultValue: undefined,\n  disabled: false,\n  readonly: false,\n  placeholder: undefined,\n  isDateUnavailable: undefined,\n})\nconst emits = defineEmits<DateRangeFieldRootEmits>()\nconst { disabled, readonly, isDateUnavailable: propsIsDateUnavailable, dir: propDir, locale: propLocale } = toRefs(props)\nconst locale = useLocale(propLocale)\nconst dir = useDirection(propDir)\n\nconst formatter = useDateFormatter(locale.value)\nconst { primitiveElement, currentElement: parentElement }\n  = usePrimitiveElement()\nconst segmentElements = ref<Set<HTMLElement>>(new Set())\n\nonMounted(() => {\n  getSegmentElements(parentElement.value).forEach(item => segmentElements.value.add(item as HTMLElement))\n})\n\nconst modelValue = useVModel(props, 'modelValue', emits, {\n  defaultValue: props.defaultValue ?? { start: undefined, end: undefined },\n  passive: (props.modelValue === undefined) as false,\n}) as Ref<DateRange | null>\n\nconst defaultDate = getDefaultDate({\n  defaultPlaceholder: props.placeholder,\n  granularity: props.granularity,\n  defaultValue: modelValue.value?.start,\n  locale: props.locale,\n})\n\nconst placeholder = useVModel(props, 'placeholder', emits, {\n  defaultValue: props.defaultPlaceholder ?? defaultDate.copy(),\n  passive: (props.placeholder === undefined) as false,\n}) as Ref<DateValue>\n\nconst inferredGranularity = computed(() => {\n  if (props.granularity)\n    return !hasTime(placeholder.value) ? 'day' : props.granularity\n\n  return hasTime(placeholder.value) ? 'minute' : 'day'\n})\n\nconst isStartInvalid = computed(() => {\n  if (!modelValue.value?.start)\n    return false\n\n  if (propsIsDateUnavailable.value?.(modelValue.value.start))\n    return true\n\n  if (props.minValue && isBefore(modelValue.value.start, props.minValue))\n    return true\n\n  if (props.maxValue && isBefore(props.maxValue, modelValue.value.start))\n    return true\n\n  return false\n})\n\nconst isEndInvalid = computed(() => {\n  if (!modelValue.value?.end)\n    return false\n\n  if (propsIsDateUnavailable.value?.(modelValue.value.end))\n    return true\n\n  if (props.minValue && isBefore(modelValue.value.end, props.minValue))\n    return true\n\n  if (props.maxValue && isBefore(props.maxValue, modelValue.value.end))\n    return true\n\n  return false\n})\n\nconst isInvalid = computed(() => {\n  if (isStartInvalid.value || isEndInvalid.value)\n    return true\n\n  if (!modelValue.value?.start || !modelValue.value?.end)\n    return false\n\n  if (!isBeforeOrSame(modelValue.value.start, modelValue.value.end))\n    return true\n\n  if (propsIsDateUnavailable.value !== undefined) {\n    const allValid = areAllDaysBetweenValid(\n      modelValue.value.start,\n      modelValue.value.end,\n      propsIsDateUnavailable.value,\n      undefined,\n    )\n    if (!allValid)\n      return true\n  }\n  return false\n})\n\nconst initialSegments = initializeSegmentValues(inferredGranularity.value)\n\nconst startSegmentValues = ref<SegmentValueObj>(modelValue.value?.start ? { ...syncSegmentValues({ value: modelValue.value.start, formatter }) } : { ...initialSegments })\nconst endSegmentValues = ref<SegmentValueObj>(modelValue.value?.end ? { ...syncSegmentValues({ value: modelValue.value.end, formatter }) } : { ...initialSegments })\n\nconst startSegmentContent = computed(() => createContent({\n  granularity: inferredGranularity.value,\n  dateRef: placeholder.value,\n  formatter,\n  hideTimeZone: props.hideTimeZone,\n  hourCycle: props.hourCycle,\n  segmentValues: startSegmentValues.value,\n  locale,\n}))\n\nconst endSegmentContent = computed(() => createContent({\n  granularity: inferredGranularity.value,\n  dateRef: placeholder.value,\n  formatter,\n  hideTimeZone: props.hideTimeZone,\n  hourCycle: props.hourCycle,\n  segmentValues: endSegmentValues.value,\n  locale,\n}))\n\nconst segmentContents = computed(() => ({\n  start: startSegmentContent.value.arr,\n  end: endSegmentContent.value.arr,\n}))\n\nconst editableSegmentContents = computed(() => ({ start: segmentContents.value.start.filter(({ part }) => part !== 'literal'), end: segmentContents.value.end.filter(({ part }) => part !== 'literal') }))\n\nconst startValue = ref(modelValue.value?.start?.copy()) as Ref<DateValue | undefined>\nconst endValue = ref(modelValue.value?.end?.copy()) as Ref<DateValue | undefined>\n\nwatch([startValue, endValue], ([_startValue, _endValue]) => {\n  modelValue.value = { start: _startValue?.copy(), end: _endValue?.copy() }\n})\n\nwatch(modelValue, (_modelValue) => {\n  if (_modelValue && _modelValue.start && _modelValue.end) {\n    if (!startValue.value || _modelValue.start.compare(startValue.value) !== 0)\n      startValue.value = _modelValue.start.copy()\n    if (!endValue.value || _modelValue.end.compare(endValue.value) !== 0)\n      endValue.value = _modelValue.end.copy()\n  }\n})\n\nwatch([startValue, locale], ([_startValue]) => {\n  if (_startValue !== undefined) {\n    startSegmentValues.value = { ...syncSegmentValues({ value: _startValue, formatter }) }\n  }\n  // If segment has null value, means that user modified it, thus do not reset the segmentValues\n  else if (Object.values(startSegmentValues.value).every(value => value !== null) && _startValue === undefined) {\n    startSegmentValues.value = { ...initialSegments }\n  }\n})\n\nwatch(locale, (value) => {\n  if (formatter.getLocale() !== value) {\n    formatter.setLocale(value)\n    // Locale changed, so we need to clear the segment elements and re-get them (different order)\n    // Get the focusable elements again on the next tick\n    nextTick(() => {\n      segmentElements.value.clear()\n      getSegmentElements(parentElement.value).forEach(item => segmentElements.value.add(item as HTMLElement))\n    })\n  }\n})\n\nwatch(modelValue, (_modelValue) => {\n  if (_modelValue && _modelValue.start !== undefined && placeholder.value.compare(_modelValue.start) !== 0)\n    placeholder.value = _modelValue.start.copy()\n})\n\nwatch([endValue, locale], ([_endValue]) => {\n  if (_endValue !== undefined) {\n    endSegmentValues.value = { ...syncSegmentValues({ value: _endValue, formatter }) }\n  }\n  // If segment has null value, means that user modified it, thus do not reset the segmentValues\n  else if (Object.values(endSegmentValues.value).every(value => value !== null) && _endValue === undefined) {\n    endSegmentValues.value = { ...initialSegments }\n  }\n})\n\nconst currentFocusedElement = ref<HTMLElement | null>(null)\n\nconst currentSegmentIndex = computed(() => Array.from(segmentElements.value).findIndex(el =>\n  el.getAttribute('data-reka-date-field-segment') === currentFocusedElement.value?.getAttribute('data-reka-date-field-segment')\n  && el.getAttribute('data-reka-date-range-field-segment-type') === currentFocusedElement.value?.getAttribute('data-reka-date-range-field-segment-type')))\n\nconst nextFocusableSegment = computed(() => {\n  const sign = dir.value === 'rtl' ? -1 : 1\n  const nextCondition = sign < 0 ? currentSegmentIndex.value < 0 : currentSegmentIndex.value > segmentElements.value.size - 1\n  if (nextCondition)\n    return null\n  const segmentToFocus = Array.from(segmentElements.value)[currentSegmentIndex.value + sign]\n  return segmentToFocus\n})\n\nconst prevFocusableSegment = computed(() => {\n  const sign = dir.value === 'rtl' ? -1 : 1\n  const prevCondition = sign > 0 ? currentSegmentIndex.value < 0 : currentSegmentIndex.value > segmentElements.value.size - 1\n  if (prevCondition)\n    return null\n\n  const segmentToFocus = Array.from(segmentElements.value)[currentSegmentIndex.value - sign]\n  return segmentToFocus\n})\n\nconst kbd = useKbd()\n\nfunction handleKeydown(e: KeyboardEvent) {\n  if (!isSegmentNavigationKey(e.key))\n    return\n  if (e.key === kbd.ARROW_LEFT)\n    prevFocusableSegment.value?.focus()\n  if (e.key === kbd.ARROW_RIGHT)\n    nextFocusableSegment.value?.focus()\n}\n\nfunction setFocusedElement(el: HTMLElement) {\n  currentFocusedElement.value = el\n}\n\nprovideDateRangeFieldRootContext({\n  isDateUnavailable: propsIsDateUnavailable.value,\n  locale,\n  startValue,\n  endValue,\n  placeholder,\n  disabled,\n  formatter,\n  hourCycle: props.hourCycle,\n  readonly,\n  segmentValues: { start: startSegmentValues, end: endSegmentValues },\n  isInvalid,\n  segmentContents: editableSegmentContents,\n  elements: segmentElements,\n  setFocusedElement,\n  focusNext() {\n    nextFocusableSegment.value?.focus()\n  },\n})\n\ndefineExpose({\n  setFocusedElement,\n})\n</script>\n\n<template>\n  <Primitive\n    v-bind=\"$attrs\"\n    ref=\"primitiveElement\"\n    role=\"group\"\n    :aria-disabled=\"disabled ? true : undefined\"\n    :data-disabled=\"disabled ? '' : undefined\"\n    :data-readonly=\"readonly ? '' : undefined\"\n    :data-invalid=\"isInvalid ? '' : undefined\"\n    :dir=\"dir\"\n    @keydown.left.right=\"handleKeydown\"\n  >\n    <slot\n      :model-value=\"modelValue\"\n      :segments=\"segmentContents\"\n    />\n\n    <VisuallyHidden\n      :id=\"id\"\n      as=\"input\"\n      feature=\"focusable\"\n      tabindex=\"-1\"\n      :value=\"`${modelValue?.start?.toString()} - ${modelValue?.end?.toString()}`\"\n      :name=\"name\"\n      :disabled=\"disabled\"\n      :required=\"required\"\n      @focus=\"Array.from(segmentElements)?.[0]?.focus()\"\n    />\n  </Primitive>\n</template>\n"],"names":["createContext","toRefs","useLocale","useDirection","useDateFormatter","usePrimitiveElement","ref","onMounted","getSegmentElements","useVModel","getDefaultDate","computed","hasTime","isBefore","isBeforeOrSame","areAllDaysBetweenValid","initializeSegmentValues","syncSegmentValues","createContent","watch","nextTick","useKbd","isSegmentNavigationKey"],"mappings":"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"}